<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SOE Tracker</title>

  <!-- PWA Meta & Manifest -->
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icon-192.png" sizes="192x192" type="image/png" />
  <meta name="theme-color" content="#a2d2ff" />
  <meta name="description" content="A simple mobile budget tracker with multiple tabs." />

  <!-- (Optional) Apple support -->
  <link rel="apple-touch-icon" href="icon-192.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <!-- Styles (already in your code likely) -->
  <style>
    /* your CSS goes here */
  </style>
</head>

 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Budget Tracker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f9f9f9;
    }
    .tabs {
      display: flex;
      background: #ddd;
      border-bottom: 1px solid #ccc;
    }
    .tab {
      flex: 1;
      padding: 10px;
      text-align: center;
      cursor: pointer;
      font-weight: bold;
      background: #eee;
    }
    .tab.active {
      background: #fff;
      border-bottom: 3px solid #333;
    }
    .tab-content {
      padding: 10px;
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    input, button {
      padding: 6px;
      margin: 4px 2px;
      font-size: 14px;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      background: #fff;
      margin: 4px 0;
      padding: 6px;
      border: 1px solid #ccc;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .paid {
      background: #d4edda;
    }
    .summary-item {
      padding: 6px;
      background: #fff;
      margin: 4px 0;
      border: 1px solid #ccc;
    }
    .actions button {
      font-size: 12px;
      margin-left: 4px;
    }
  </style>
</head>
<body>

<div class="tabs">
  <div class="tab active" onclick="switchTab('spending')">Spending</div>
  <div class="tab" onclick="switchTab('payback')">Payback</div>
  <div class="tab" onclick="switchTab('summary')">Summary</div>
</div>

<div id="spending" class="tab-content active">
  <h2>Spending</h2>
  <input type="number" id="spendingBudgetInput" placeholder="Add to budget" />
  <button onclick="addToBudget()">Add</button>
  <p><strong>Total Budget:</strong> $<span id="spendingBudget">0</span></p>
  <input type="text" id="purchaseDesc" placeholder="What did you buy?" />
  <input type="number" id="purchaseAmt" placeholder="Amount" />
  <button onclick="addPurchase()">Add Purchase</button>
  <button onclick="clearSpending()">Clear All</button>
  <button onclick="clearSpendingBudget()">Clear Budget</button>
  <ul id="purchaseList"></ul>
</div>

<div id="payback" class="tab-content">
  <h2>Payback</h2>
  <input type="text" id="paybackDate" placeholder="Date or Note" />
  <input type="number" id="paybackAmt" placeholder="Amount" />
  <button onclick="addPayback()">Add Entry</button>
  <ul id="paybackList"></ul>
</div>

<div id="summary" class="tab-content">
  <h2>Summary</h2>
  <ul id="summaryList"></ul>
</div>

<script>
  const spendingKey = 'spendingData';
  const paybackKey = 'paybackData';

  function switchTab(tabId) {
    document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
    document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    document.querySelector(`.tab[onclick="switchTab('${tabId}')"]`).classList.add('active');
    if (tabId === 'summary') updateSummary();
  }

  function saveData() {
    localStorage.setItem(spendingKey, JSON.stringify(spending));
    localStorage.setItem(paybackKey, JSON.stringify(payback));
  }

  let spending = JSON.parse(localStorage.getItem(spendingKey)) || { budget: 0, purchases: [] };
  let payback = JSON.parse(localStorage.getItem(paybackKey)) || [];

  function updateSpendingUI() {
    document.getElementById('spendingBudget').textContent = spending.budget.toFixed(2);
    const list = document.getElementById('purchaseList');
    list.innerHTML = '';
    spending.purchases.forEach((item, index) => {
      const li = document.createElement('li');
      li.className = item.paid ? 'paid' : '';
      li.innerHTML = `
        ${item.desc} ‚Äì $${item.amount.toFixed(2)}
        <div class="actions">
          <button onclick="editPurchase(${index})">‚úèÔ∏è</button>
          <button onclick="deletePurchase(${index})">üóëÔ∏è</button>
          <button onclick="togglePaid(${index})">${item.paid ? 'Undo' : 'Paid'}</button>
        </div>`;
      list.appendChild(li);
    });
    saveData();
  }

  function updatePaybackUI() {
    const list = document.getElementById('paybackList');
    list.innerHTML = '';
    payback.forEach((item, index) => {
      const li = document.createElement('li');
      li.innerHTML = `${item.date} ‚Äì $${item.amount.toFixed(2)}
        <div class="actions">
          <button onclick="editPayback(${index})">‚úèÔ∏è</button>
          <button onclick="deletePayback(${index})">üóëÔ∏è</button>
        </div>`;
      list.appendChild(li);
    });
    saveData();
  }

  function updateSummary() {
    const summary = {};
    spending.purchases.forEach(item => {
      summary[item.desc] = (summary[item.desc] || 0) + item.amount;
    });
    const list = document.getElementById('summaryList');
    list.innerHTML = '';
    Object.entries(summary).forEach(([desc, total]) => {
      const li = document.createElement('li');
      li.className = 'summary-item';
      li.textContent = `${desc} ‚Äì $${total.toFixed(2)}`;
      list.appendChild(li);
    });
  }

  function addToBudget() {
    const amt = parseFloat(document.getElementById('spendingBudgetInput').value);
    if (!isNaN(amt)) {
      spending.budget += amt;
      document.getElementById('spendingBudgetInput').value = '';
      updateSpendingUI();
    }
  }

  function addPurchase() {
    const desc = document.getElementById('purchaseDesc').value;
    const amt = parseFloat(document.getElementById('purchaseAmt').value);
    if (desc && !isNaN(amt)) {
      spending.purchases.push({ desc, amount: amt, paid: false });
      document.getElementById('purchaseDesc').value = '';
      document.getElementById('purchaseAmt').value = '';
      updateSpendingUI();
    }
  }

  function editPurchase(index) {
    const item = spending.purchases[index];
    const newDesc = prompt("Edit description:", item.desc);
    const newAmt = prompt("Edit amount:", item.amount);
    if (newDesc && !isNaN(parseFloat(newAmt))) {
      spending.purchases[index] = { ...item, desc: newDesc, amount: parseFloat(newAmt) };
      updateSpendingUI();
    }
  }

  function deletePurchase(index) {
    spending.purchases.splice(index, 1);
    updateSpendingUI();
  }

  function togglePaid(index) {
    spending.purchases[index].paid = !spending.purchases[index].paid;
    updateSpendingUI();
  }

  function clearSpending() {
    spending.purchases = [];
    updateSpendingUI();
  }

  function clearSpendingBudget() {
    spending.budget = 0;
    updateSpendingUI();
  }

  function addPayback() {
    const date = document.getElementById('paybackDate').value;
    const amt = parseFloat(document.getElementById('paybackAmt').value);
    if (date && !isNaN(amt)) {
      payback.push({ date, amount: amt });
      document.getElementById('paybackDate').value = '';
      document.getElementById('paybackAmt').value = '';
      updatePaybackUI();
    }
  }

  function editPayback(index) {
    const item = payback[index];
    const newDate = prompt("Edit date:", item.date);
    const newAmt = prompt("Edit amount:", item.amount);
    if (newDate && !isNaN(parseFloat(newAmt))) {
      payback[index] = { date: newDate, amount: parseFloat(newAmt) };
      updatePaybackUI();
    }
  }

  function deletePayback(index) {
    payback.splice(index, 1);
    updatePaybackUI();
  }

  updateSpendingUI();
  updatePaybackUI();
</script>

</body>
</html>
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('service-worker.js')
      .then(() => console.log("Service Worker registered"))
      .catch(err => console.error("Service Worker registration failed:", err));
  }
</script>

</body>
</html>
